
<!-- saved from url=(0120)http://www.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/7feadbc7606af9ce0e5d242e1ba75fd53717da7d/iframe.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><div class="line-gutter-backdrop"></div><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-doctype">&lt;!DOCTYPE html&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-tag">&lt;meta <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">utf-8</span>"&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content"><span class="html-tag">&lt;style&gt;</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="5"></td><td class="line-content">body {</td></tr><tr><td class="line-number" value="6"></td><td class="line-content">  overflow: hidden;</td></tr><tr><td class="line-number" value="7"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="8"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="9"></td><td class="line-content">body, h1, h2, h3, h4, h5, h6, p {</td></tr><tr><td class="line-number" value="10"></td><td class="line-content">  margin: 0;</td></tr><tr><td class="line-number" value="11"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="12"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="13"></td><td class="line-content">h1, h2, h3, h4, h5, h6 {</td></tr><tr><td class="line-number" value="14"></td><td class="line-content">  color: #000;</td></tr><tr><td class="line-number" value="15"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="16"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="17"></td><td class="line-content">.g-chart {</td></tr><tr><td class="line-number" value="18"></td><td class="line-content">  font: 10px sans-serif;</td></tr><tr><td class="line-number" value="19"></td><td class="line-content">  height: 652px;</td></tr><tr><td class="line-number" value="20"></td><td class="line-content">  position: relative;</td></tr><tr><td class="line-number" value="21"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="22"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="23"></td><td class="line-content">.g-heads {</td></tr><tr><td class="line-number" value="24"></td><td class="line-content">  position: absolute;</td></tr><tr><td class="line-number" value="25"></td><td class="line-content">  top: 170px;</td></tr><tr><td class="line-number" value="26"></td><td class="line-content">  left: 485px;</td></tr><tr><td class="line-number" value="27"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="28"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="29"></td><td class="line-content">.g-heads img {</td></tr><tr><td class="line-number" value="30"></td><td class="line-content">  opacity: 0;</td></tr><tr><td class="line-number" value="31"></td><td class="line-content">  position: absolute;</td></tr><tr><td class="line-number" value="32"></td><td class="line-content">  left: -100px;</td></tr><tr><td class="line-number" value="33"></td><td class="line-content">  -webkit-transition-property: opacity left;</td></tr><tr><td class="line-number" value="34"></td><td class="line-content">  -moz-transition-property: opacity left;</td></tr><tr><td class="line-number" value="35"></td><td class="line-content">  -ms-transition-property: opacity left;</td></tr><tr><td class="line-number" value="36"></td><td class="line-content">  transition-property: opacity left;</td></tr><tr><td class="line-number" value="37"></td><td class="line-content">  -webkit-transition-duration: 0.5s;</td></tr><tr><td class="line-number" value="38"></td><td class="line-content">  -moz-transition-duration: 0.5s;</td></tr><tr><td class="line-number" value="39"></td><td class="line-content">  -ms-transition-duration: 0.5s;</td></tr><tr><td class="line-number" value="40"></td><td class="line-content">  transition-duration: 0.5s;</td></tr><tr><td class="line-number" value="41"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="42"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="43"></td><td class="line-content">.g-chart svg {</td></tr><tr><td class="line-number" value="44"></td><td class="line-content">  position: relative;</td></tr><tr><td class="line-number" value="45"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="46"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="47"></td><td class="line-content">.g-scoreboard text {</td></tr><tr><td class="line-number" value="48"></td><td class="line-content">  font-size: 18px;</td></tr><tr><td class="line-number" value="49"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="50"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="51"></td><td class="line-content">text.g-kicker {</td></tr><tr><td class="line-number" value="52"></td><td class="line-content">  font-size: 16px;</td></tr><tr><td class="line-number" value="53"></td><td class="line-content">  text-anchor: middle;</td></tr><tr><td class="line-number" value="54"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="55"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="56"></td><td class="line-content">.g-scoreboard rect,</td></tr><tr><td class="line-number" value="57"></td><td class="line-content">.g-scoreboard path {</td></tr><tr><td class="line-number" value="58"></td><td class="line-content">  fill: #fff;</td></tr><tr><td class="line-number" value="59"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="60"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="61"></td><td class="line-content">.g-scoreboard path {</td></tr><tr><td class="line-number" value="62"></td><td class="line-content">  stroke: #ddd;</td></tr><tr><td class="line-number" value="63"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="64"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="65"></td><td class="line-content">.g-score {</td></tr><tr><td class="line-number" value="66"></td><td class="line-content">  font-weight: bold;</td></tr><tr><td class="line-number" value="67"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="68"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="69"></td><td class="line-content">.g-alert {</td></tr><tr><td class="line-number" value="70"></td><td class="line-content">  fill: #999;</td></tr><tr><td class="line-number" value="71"></td><td class="line-content">  opacity: 0;</td></tr><tr><td class="line-number" value="72"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="73"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="74"></td><td class="line-content">.g-alert tspan {</td></tr><tr><td class="line-number" value="75"></td><td class="line-content">  font-size: 18px;</td></tr><tr><td class="line-number" value="76"></td><td class="line-content">  text-anchor: middle;</td></tr><tr><td class="line-number" value="77"></td><td class="line-content">  margin: 0;</td></tr><tr><td class="line-number" value="78"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="79"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="80"></td><td class="line-content">.g-scoreboard .g-dem,</td></tr><tr><td class="line-number" value="81"></td><td class="line-content">.g-node.g-dem .g-label-line2 {</td></tr><tr><td class="line-number" value="82"></td><td class="line-content">  color: #338ccc;</td></tr><tr><td class="line-number" value="83"></td><td class="line-content">  fill: #338ccc;</td></tr><tr><td class="line-number" value="84"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="85"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="86"></td><td class="line-content">.g-scoreboard .g-rep,</td></tr><tr><td class="line-number" value="87"></td><td class="line-content">.g-node.g-rep .g-label-line2 {</td></tr><tr><td class="line-number" value="88"></td><td class="line-content">  color: #cc334d;</td></tr><tr><td class="line-number" value="89"></td><td class="line-content">  fill: #cc334d;</td></tr><tr><td class="line-number" value="90"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="91"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="92"></td><td class="line-content">.g-scoreboard .g-tie,</td></tr><tr><td class="line-number" value="93"></td><td class="line-content">.g-node .g-tie + .g-label .g-label-line2 {</td></tr><tr><td class="line-number" value="94"></td><td class="line-content">  color: #e4c567;</td></tr><tr><td class="line-number" value="95"></td><td class="line-content">  fill: #e4c567;</td></tr><tr><td class="line-number" value="96"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="97"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="98"></td><td class="line-content">.g-scoreboard .g-ratio {</td></tr><tr><td class="line-number" value="99"></td><td class="line-content">  fill: #bbb;</td></tr><tr><td class="line-number" value="100"></td><td class="line-content">  font-size: 10px;</td></tr><tr><td class="line-number" value="101"></td><td class="line-content">  text-anchor: middle;</td></tr><tr><td class="line-number" value="102"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="103"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="104"></td><td class="line-content">.g-link {</td></tr><tr><td class="line-number" value="105"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="106"></td><td class="line-content">  stroke: #000;</td></tr><tr><td class="line-number" value="107"></td><td class="line-content">  stroke-width: 1.5px;</td></tr><tr><td class="line-number" value="108"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="109"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="110"></td><td class="line-content">.g-node.g-null {</td></tr><tr><td class="line-number" value="111"></td><td class="line-content">  display: none;</td></tr><tr><td class="line-number" value="112"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="113"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="114"></td><td class="line-content">.g-node.g-dem circle {</td></tr><tr><td class="line-number" value="115"></td><td class="line-content">  fill: #1782cf;</td></tr><tr><td class="line-number" value="116"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="117"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="118"></td><td class="line-content">.g-node.g-rep circle {</td></tr><tr><td class="line-number" value="119"></td><td class="line-content">  fill: #da0b2e;</td></tr><tr><td class="line-number" value="120"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="121"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="122"></td><td class="line-content">.g-node .g-tie circle {</td></tr><tr><td class="line-number" value="123"></td><td class="line-content">  fill: #e6ac00;</td></tr><tr><td class="line-number" value="124"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="125"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="126"></td><td class="line-content">.g-marker.g-dem {</td></tr><tr><td class="line-number" value="127"></td><td class="line-content">  fill: #c2ddf0;</td></tr><tr><td class="line-number" value="128"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="129"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="130"></td><td class="line-content">.g-link.g-dem,</td></tr><tr><td class="line-number" value="131"></td><td class="line-content">.g-node.g-dem .g-check {</td></tr><tr><td class="line-number" value="132"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="133"></td><td class="line-content">  stroke: #c2ddf0;</td></tr><tr><td class="line-number" value="134"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="135"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="136"></td><td class="line-content">.g-marker.g-rep {</td></tr><tr><td class="line-number" value="137"></td><td class="line-content">  fill: #f6cbd2;</td></tr><tr><td class="line-number" value="138"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="139"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="140"></td><td class="line-content">.g-link.g-rep,</td></tr><tr><td class="line-number" value="141"></td><td class="line-content">.g-node.g-rep .g-check {</td></tr><tr><td class="line-number" value="142"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="143"></td><td class="line-content">  stroke: #f6cbd2;</td></tr><tr><td class="line-number" value="144"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="145"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="146"></td><td class="line-content">.g-leaf.g-tie .g-check {</td></tr><tr><td class="line-number" value="147"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="148"></td><td class="line-content">  stroke: white;</td></tr><tr><td class="line-number" value="149"></td><td class="line-content">  stroke-opacity: 0.8;</td></tr><tr><td class="line-number" value="150"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="151"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="152"></td><td class="line-content">.g-node text {</td></tr><tr><td class="line-number" value="153"></td><td class="line-content">  display: none;</td></tr><tr><td class="line-number" value="154"></td><td class="line-content">  font-size: 13px;</td></tr><tr><td class="line-number" value="155"></td><td class="line-content">  text-anchor: middle;</td></tr><tr><td class="line-number" value="156"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="157"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="158"></td><td class="line-content">.g-chart:not(:hover) .g-node.g-first text,</td></tr><tr><td class="line-number" value="159"></td><td class="line-content">.g-dem .g-node.g-dem.g-active text,</td></tr><tr><td class="line-number" value="160"></td><td class="line-content">.g-rep .g-node.g-rep.g-active text {</td></tr><tr><td class="line-number" value="161"></td><td class="line-content">  display: inline;</td></tr><tr><td class="line-number" value="162"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="163"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="164"></td><td class="line-content">.g-marker.g-dem-active {</td></tr><tr><td class="line-number" value="165"></td><td class="line-content">  fill: #2280c3;</td></tr><tr><td class="line-number" value="166"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="167"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="168"></td><td class="line-content">.g-link.g-active.g-dem,</td></tr><tr><td class="line-number" value="169"></td><td class="line-content">.g-node.g-active.g-dem circle {</td></tr><tr><td class="line-number" value="170"></td><td class="line-content">  stroke: #2280c3;</td></tr><tr><td class="line-number" value="171"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="172"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="173"></td><td class="line-content">.g-marker.g-rep-active {</td></tr><tr><td class="line-number" value="174"></td><td class="line-content">  fill: #da0b2e;</td></tr><tr><td class="line-number" value="175"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="176"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="177"></td><td class="line-content">.g-link.g-active.g-rep,</td></tr><tr><td class="line-number" value="178"></td><td class="line-content">.g-node.g-active.g-rep circle {</td></tr><tr><td class="line-number" value="179"></td><td class="line-content">  stroke: #da0b2e;</td></tr><tr><td class="line-number" value="180"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="181"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="182"></td><td class="line-content">.g-label-line2 {</td></tr><tr><td class="line-number" value="183"></td><td class="line-content">  font-weight: bold;</td></tr><tr><td class="line-number" value="184"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="185"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="186"></td><td class="line-content">.g-state text {</td></tr><tr><td class="line-number" value="187"></td><td class="line-content">  fill: #999;</td></tr><tr><td class="line-number" value="188"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="189"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="190"></td><td class="line-content">.g-state.g-dem text,</td></tr><tr><td class="line-number" value="191"></td><td class="line-content">.g-state.g-rep text {</td></tr><tr><td class="line-number" value="192"></td><td class="line-content">  fill: #000;</td></tr><tr><td class="line-number" value="193"></td><td class="line-content">  font-weight: bold;</td></tr><tr><td class="line-number" value="194"></td><td class="line-content">  fill-opacity: 0.8</td></tr><tr><td class="line-number" value="195"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="196"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="197"></td><td class="line-content">.g-state text.g-dem,</td></tr><tr><td class="line-number" value="198"></td><td class="line-content">.g-state text.g-rep,</td></tr><tr><td class="line-number" value="199"></td><td class="line-content">.g-state rect {</td></tr><tr><td class="line-number" value="200"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="201"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="202"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="203"></td><td class="line-content">.g-state.g-dem text.g-dem,</td></tr><tr><td class="line-number" value="204"></td><td class="line-content">.g-state.g-rep text.g-rep {</td></tr><tr><td class="line-number" value="205"></td><td class="line-content">  fill: #fff;</td></tr><tr><td class="line-number" value="206"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="207"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="208"></td><td class="line-content">.g-state.g-dem rect {</td></tr><tr><td class="line-number" value="209"></td><td class="line-content">  fill: #2280c3;</td></tr><tr><td class="line-number" value="210"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="211"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="212"></td><td class="line-content">.g-state.g-rep rect {</td></tr><tr><td class="line-number" value="213"></td><td class="line-content">  fill: #da0b2e;</td></tr><tr><td class="line-number" value="214"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="215"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="216"></td><td class="line-content">.g-node.g-active.g-dem circle,</td></tr><tr><td class="line-number" value="217"></td><td class="line-content">.g-node.g-active.g-rep circle {</td></tr><tr><td class="line-number" value="218"></td><td class="line-content">  stroke: #000;</td></tr><tr><td class="line-number" value="219"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="220"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="221"></td><td class="line-content">.g-node.g-active.g-dem circle,</td></tr><tr><td class="line-number" value="222"></td><td class="line-content">.g-node.g-active.g-rep circle {</td></tr><tr><td class="line-number" value="223"></td><td class="line-content">  stroke-width: 1.5px;</td></tr><tr><td class="line-number" value="224"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="225"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="226"></td><td class="line-content">.g-check {</td></tr><tr><td class="line-number" value="227"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="228"></td><td class="line-content">  stroke-width: 15px;</td></tr><tr><td class="line-number" value="229"></td><td class="line-content">  stroke-opacity: .8;</td></tr><tr><td class="line-number" value="230"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="231"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="232"></td><td class="line-content">.g-state line {</td></tr><tr><td class="line-number" value="233"></td><td class="line-content">  stroke: #777;</td></tr><tr><td class="line-number" value="234"></td><td class="line-content">  stroke-opacity: .1;</td></tr><tr><td class="line-number" value="235"></td><td class="line-content">  shape-rendering: crispEdges;</td></tr><tr><td class="line-number" value="236"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="237"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="238"></td><td class="line-content">.g-voronoi {</td></tr><tr><td class="line-number" value="239"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="240"></td><td class="line-content">  pointer-events: all;</td></tr><tr><td class="line-number" value="241"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="242"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="243"></td><td class="line-content">.g-chart marker {</td></tr><tr><td class="line-number" value="244"></td><td class="line-content">  stroke: #fff;</td></tr><tr><td class="line-number" value="245"></td><td class="line-content">  stroke-width: .25px;</td></tr><tr><td class="line-number" value="246"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="247"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="248"></td><td class="line-content">.g-controls {</td></tr><tr><td class="line-number" value="249"></td><td class="line-content">  border-bottom: solid 1px #dedede;</td></tr><tr><td class="line-number" value="250"></td><td class="line-content">  border-top: solid 1px #dedede;</td></tr><tr><td class="line-number" value="251"></td><td class="line-content">  font: 13px "Helvetica Neue", Helvetica, Arial, sans-serif;</td></tr><tr><td class="line-number" value="252"></td><td class="line-content">  margin-left: 10px;</td></tr><tr><td class="line-number" value="253"></td><td class="line-content">  margin: 0 10px;</td></tr><tr><td class="line-number" value="254"></td><td class="line-content">  overflow: hidden;</td></tr><tr><td class="line-number" value="255"></td><td class="line-content">  padding: 10px 10px 10px 66px;</td></tr><tr><td class="line-number" value="256"></td><td class="line-content">  position: relative;</td></tr><tr><td class="line-number" value="257"></td><td class="line-content">  height: 50px;</td></tr><tr><td class="line-number" value="258"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="259"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="260"></td><td class="line-content">.g-reset {</td></tr><tr><td class="line-number" value="261"></td><td class="line-content">  display: none;</td></tr><tr><td class="line-number" value="262"></td><td class="line-content">  position: absolute;</td></tr><tr><td class="line-number" value="263"></td><td class="line-content">  top: 0;</td></tr><tr><td class="line-number" value="264"></td><td class="line-content">  left: 10px;</td></tr><tr><td class="line-number" value="265"></td><td class="line-content">  padding: 12px 20px 12px 20px;</td></tr><tr><td class="line-number" value="266"></td><td class="line-content">  margin-top: 26px;</td></tr><tr><td class="line-number" value="267"></td><td class="line-content">  font-size: 11px;</td></tr><tr><td class="line-number" value="268"></td><td class="line-content">  line-height: 1em;</td></tr><tr><td class="line-number" value="269"></td><td class="line-content">  cursor: pointer;</td></tr><tr><td class="line-number" value="270"></td><td class="line-content">  text-decoration: none;</td></tr><tr><td class="line-number" value="271"></td><td class="line-content">  color: #000;</td></tr><tr><td class="line-number" value="272"></td><td class="line-content">  background: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/close-button.svg) no-repeat left center;</td></tr><tr><td class="line-number" value="273"></td><td class="line-content">  opacity: 0.4;</td></tr><tr><td class="line-number" value="274"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="275"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="276"></td><td class="line-content">.g-reset:hover {</td></tr><tr><td class="line-number" value="277"></td><td class="line-content">  opacity: 1;</td></tr><tr><td class="line-number" value="278"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="279"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="280"></td><td class="line-content">.g-control {</td></tr><tr><td class="line-number" value="281"></td><td class="line-content">  border-right: dotted 1px #ddd;</td></tr><tr><td class="line-number" value="282"></td><td class="line-content">  float: left;</td></tr><tr><td class="line-number" value="283"></td><td class="line-content">  height: 50px;</td></tr><tr><td class="line-number" value="284"></td><td class="line-content">  position: relative;</td></tr><tr><td class="line-number" value="285"></td><td class="line-content">  text-align: center;</td></tr><tr><td class="line-number" value="286"></td><td class="line-content">  width: 90px;</td></tr><tr><td class="line-number" value="287"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="288"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="289"></td><td class="line-content">.g-control:last-child {</td></tr><tr><td class="line-number" value="290"></td><td class="line-content">  border-right: none;</td></tr><tr><td class="line-number" value="291"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="292"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="293"></td><td class="line-content">.g-control span {</td></tr><tr><td class="line-number" value="294"></td><td class="line-content">  display: block;</td></tr><tr><td class="line-number" value="295"></td><td class="line-content">  position: absolute;</td></tr><tr><td class="line-number" value="296"></td><td class="line-content">  top:0;</td></tr><tr><td class="line-number" value="297"></td><td class="line-content">  width: 90px;</td></tr><tr><td class="line-number" value="298"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="299"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="300"></td><td class="line-content">.g-button {</td></tr><tr><td class="line-number" value="301"></td><td class="line-content">  background: #fff;</td></tr><tr><td class="line-number" value="302"></td><td class="line-content">  border-bottom-color: #ccc;</td></tr><tr><td class="line-number" value="303"></td><td class="line-content">  border: solid 1px #ddd;</td></tr><tr><td class="line-number" value="304"></td><td class="line-content">  box-shadow: 0 2px 2px rgba(0,0,0,0.08);</td></tr><tr><td class="line-number" value="305"></td><td class="line-content">  color: #aaa;</td></tr><tr><td class="line-number" value="306"></td><td class="line-content">  cursor: pointer;</td></tr><tr><td class="line-number" value="307"></td><td class="line-content">  font-family: inherit;</td></tr><tr><td class="line-number" value="308"></td><td class="line-content">  font-size: 10px;</td></tr><tr><td class="line-number" value="309"></td><td class="line-content">  line-height: 17px;</td></tr><tr><td class="line-number" value="310"></td><td class="line-content">  margin: 20px -1px 0 0;</td></tr><tr><td class="line-number" value="311"></td><td class="line-content">  padding: 4px 0;</td></tr><tr><td class="line-number" value="312"></td><td class="line-content">  text-align: center;</td></tr><tr><td class="line-number" value="313"></td><td class="line-content">  text-transform: capitalize;</td></tr><tr><td class="line-number" value="314"></td><td class="line-content">  width: 35px;</td></tr><tr><td class="line-number" value="315"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="316"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="317"></td><td class="line-content">.g-button:first-of-type {</td></tr><tr><td class="line-number" value="318"></td><td class="line-content">  border-radius: 4px 0 0 4px;</td></tr><tr><td class="line-number" value="319"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="320"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="321"></td><td class="line-content">.g-button:last-of-type {</td></tr><tr><td class="line-number" value="322"></td><td class="line-content">  border-radius: 0 4px 4px 0;</td></tr><tr><td class="line-number" value="323"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="324"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="325"></td><td class="line-content">.g-button:hover {</td></tr><tr><td class="line-number" value="326"></td><td class="line-content">  border-bottom-color: #bbb;</td></tr><tr><td class="line-number" value="327"></td><td class="line-content">  border-color: #ccc;</td></tr><tr><td class="line-number" value="328"></td><td class="line-content">  color: #666;</td></tr><tr><td class="line-number" value="329"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="330"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="331"></td><td class="line-content">.g-button.g-active,</td></tr><tr><td class="line-number" value="332"></td><td class="line-content">.g-button:active {</td></tr><tr><td class="line-number" value="333"></td><td class="line-content">  background-color: #f0f0f0;</td></tr><tr><td class="line-number" value="334"></td><td class="line-content">  border-color: #aaa;</td></tr><tr><td class="line-number" value="335"></td><td class="line-content">  border-top-color: #999;</td></tr><tr><td class="line-number" value="336"></td><td class="line-content">  box-shadow: inset 0 1px 6px rgba(0,0,0,0.3);</td></tr><tr><td class="line-number" value="337"></td><td class="line-content">  color: #333;</td></tr><tr><td class="line-number" value="338"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="339"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="340"></td><td class="line-content">.g-button.g-dem.g-active,</td></tr><tr><td class="line-number" value="341"></td><td class="line-content">.g-button.g-dem:active {</td></tr><tr><td class="line-number" value="342"></td><td class="line-content">  background-color: #1782cf;</td></tr><tr><td class="line-number" value="343"></td><td class="line-content">  color: white;</td></tr><tr><td class="line-number" value="344"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="345"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="346"></td><td class="line-content">.g-button.g-rep.g-active,</td></tr><tr><td class="line-number" value="347"></td><td class="line-content">.g-button.g-rep:active {</td></tr><tr><td class="line-number" value="348"></td><td class="line-content">  background-color: #da0b2e;</td></tr><tr><td class="line-number" value="349"></td><td class="line-content">  color: white;</td></tr><tr><td class="line-number" value="350"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="351"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="352"></td><td class="line-content">.g-scenario-group {</td></tr><tr><td class="line-number" value="353"></td><td class="line-content">  border-top: solid 1px #ccc;</td></tr><tr><td class="line-number" value="354"></td><td class="line-content">  font-family: Helvetica, Arial;</td></tr><tr><td class="line-number" value="355"></td><td class="line-content">  margin: 10px 10px 20px;</td></tr><tr><td class="line-number" value="356"></td><td class="line-content">  overflow: hidden;</td></tr><tr><td class="line-number" value="357"></td><td class="line-content">  padding: 20px 0;</td></tr><tr><td class="line-number" value="358"></td><td class="line-content">  position: relative;</td></tr><tr><td class="line-number" value="359"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="360"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="361"></td><td class="line-content">.g-scenario {</td></tr><tr><td class="line-number" value="362"></td><td class="line-content">  float: left;</td></tr><tr><td class="line-number" value="363"></td><td class="line-content">  width: 217px;</td></tr><tr><td class="line-number" value="364"></td><td class="line-content">  margin: 0 10px;</td></tr><tr><td class="line-number" value="365"></td><td class="line-content">  color: #666;</td></tr><tr><td class="line-number" value="366"></td><td class="line-content">  position: relative;</td></tr><tr><td class="line-number" value="367"></td><td class="line-content">  height: 260px;</td></tr><tr><td class="line-number" value="368"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="369"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="370"></td><td class="line-content">.g-scenario h3 {</td></tr><tr><td class="line-number" value="371"></td><td class="line-content">  font-size: 13px;</td></tr><tr><td class="line-number" value="372"></td><td class="line-content">  line-height: 1.4em;</td></tr><tr><td class="line-number" value="373"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="374"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="375"></td><td class="line-content">.g-scenario p {</td></tr><tr><td class="line-number" value="376"></td><td class="line-content">  font-size: 12px;</td></tr><tr><td class="line-number" value="377"></td><td class="line-content">  line-height: 1.4em;</td></tr><tr><td class="line-number" value="378"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="379"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="380"></td><td class="line-content">.g-scenario .g-button {</td></tr><tr><td class="line-number" value="381"></td><td class="line-content">  border-radius: 4px;</td></tr><tr><td class="line-number" value="382"></td><td class="line-content">  width: 217px;</td></tr><tr><td class="line-number" value="383"></td><td class="line-content">  position: absolute;</td></tr><tr><td class="line-number" value="384"></td><td class="line-content">  bottom: 0;</td></tr><tr><td class="line-number" value="385"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="386"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="387"></td><td class="line-content">.g-scenario .g-preview {</td></tr><tr><td class="line-number" value="388"></td><td class="line-content">  background-size: 160px 112px;</td></tr><tr><td class="line-number" value="389"></td><td class="line-content">  bottom: 10px;</td></tr><tr><td class="line-number" value="390"></td><td class="line-content">  height: 112px;</td></tr><tr><td class="line-number" value="391"></td><td class="line-content">  left: 25px;</td></tr><tr><td class="line-number" value="392"></td><td class="line-content">  position: absolute;</td></tr><tr><td class="line-number" value="393"></td><td class="line-content">  width: 160px;</td></tr><tr><td class="line-number" value="394"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="395"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="396"></td><td class="line-content">.g-scenario-1 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario1.svg); }</td></tr><tr><td class="line-number" value="397"></td><td class="line-content">.g-scenario-2 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario2.svg); }</td></tr><tr><td class="line-number" value="398"></td><td class="line-content">.g-scenario-3 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario3.svg); }</td></tr><tr><td class="line-number" value="399"></td><td class="line-content">.g-scenario-4 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario4.svg); }</td></tr><tr><td class="line-number" value="400"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="401"></td><td class="line-content"><span class="html-tag">&lt;/style&gt;</span></td></tr><tr><td class="line-number" value="402"></td><td class="line-content"><span class="html-comment">&lt;!--[if lte IE 8]&gt;</span></td></tr><tr><td class="line-number" value="403"></td><td class="line-content"><span class="html-comment">&lt;style type="text/css"&gt;</span></td></tr><tr><td class="line-number" value="404"></td><td class="line-content"><span class="html-comment"><br></span></td></tr><tr><td class="line-number" value="405"></td><td class="line-content"><span class="html-comment">.g-chart {</span></td></tr><tr><td class="line-number" value="406"></td><td class="line-content"><span class="html-comment">  border-top: solid 1px #ccc;</span></td></tr><tr><td class="line-number" value="407"></td><td class="line-content"><span class="html-comment">  background: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/fallback.png);</span></td></tr><tr><td class="line-number" value="408"></td><td class="line-content"><span class="html-comment">  width: 970px;</span></td></tr><tr><td class="line-number" value="409"></td><td class="line-content"><span class="html-comment">}</span></td></tr><tr><td class="line-number" value="410"></td><td class="line-content"><span class="html-comment"><br></span></td></tr><tr><td class="line-number" value="411"></td><td class="line-content"><span class="html-comment">.g-controls {</span></td></tr><tr><td class="line-number" value="412"></td><td class="line-content"><span class="html-comment">  display: none;</span></td></tr><tr><td class="line-number" value="413"></td><td class="line-content"><span class="html-comment">}</span></td></tr><tr><td class="line-number" value="414"></td><td class="line-content"><span class="html-comment"><br></span></td></tr><tr><td class="line-number" value="415"></td><td class="line-content"><span class="html-comment">.g-error {</span></td></tr><tr><td class="line-number" value="416"></td><td class="line-content"><span class="html-comment">  background-color: #ffd;</span></td></tr><tr><td class="line-number" value="417"></td><td class="line-content"><span class="html-comment">  border: solid 1px #ccc;</span></td></tr><tr><td class="line-number" value="418"></td><td class="line-content"><span class="html-comment">  font-size: 15px;</span></td></tr><tr><td class="line-number" value="419"></td><td class="line-content"><span class="html-comment">  margin: 10px;</span></td></tr><tr><td class="line-number" value="420"></td><td class="line-content"><span class="html-comment">  padding: 20px;</span></td></tr><tr><td class="line-number" value="421"></td><td class="line-content"><span class="html-comment">  text-align: center;</span></td></tr><tr><td class="line-number" value="422"></td><td class="line-content"><span class="html-comment">}</span></td></tr><tr><td class="line-number" value="423"></td><td class="line-content"><span class="html-comment"><br></span></td></tr><tr><td class="line-number" value="424"></td><td class="line-content"><span class="html-comment">.g-scenario button {</span></td></tr><tr><td class="line-number" value="425"></td><td class="line-content"><span class="html-comment">  display: none;</span></td></tr><tr><td class="line-number" value="426"></td><td class="line-content"><span class="html-comment">}</span></td></tr><tr><td class="line-number" value="427"></td><td class="line-content"><span class="html-comment"><br></span></td></tr><tr><td class="line-number" value="428"></td><td class="line-content"><span class="html-comment">.g-scenario-1 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario1.png); }</span></td></tr><tr><td class="line-number" value="429"></td><td class="line-content"><span class="html-comment">.g-scenario-2 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario2.png); }</span></td></tr><tr><td class="line-number" value="430"></td><td class="line-content"><span class="html-comment">.g-scenario-3 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario3.png); }</span></td></tr><tr><td class="line-number" value="431"></td><td class="line-content"><span class="html-comment">.g-scenario-4 .g-preview { background-image: url(http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/scenario4.png); }</span></td></tr><tr><td class="line-number" value="432"></td><td class="line-content"><span class="html-comment"><br></span></td></tr><tr><td class="line-number" value="433"></td><td class="line-content"><span class="html-comment">&lt;/style&gt;</span></td></tr><tr><td class="line-number" value="434"></td><td class="line-content"><span class="html-comment">&lt;p class="g-error"&gt;This interactive graphic requires a browser with SVG support, such as &lt;a href="http://www.google.com/chrome"&gt;Chrome&lt;/a&gt;, &lt;a href="http://www.mozilla.org/en-US/firefox/"&gt;Firefox&lt;/a&gt;, &lt;a href="http://www.apple.com/safari/download/"&gt;Safari&lt;/a&gt; or the latest &lt;a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home"&gt;Internet Explorer 9&lt;/a&gt;.&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="435"></td><td class="line-content"><span class="html-comment">&lt;![endif]--&gt;</span></td></tr><tr><td class="line-number" value="436"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-controls</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="437"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-chart</span>"&gt;</span></td></tr><tr><td class="line-number" value="438"></td><td class="line-content">  <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-heads</span>"&gt;</span></td></tr><tr><td class="line-number" value="439"></td><td class="line-content">    <span class="html-tag">&lt;img <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-dem</span>" <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/obama-head.png">http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/obama-head.png</a>"&gt;</span></td></tr><tr><td class="line-number" value="440"></td><td class="line-content">    <span class="html-tag">&lt;img <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-rep</span>" <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/romney-head.png">http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/romney-head.png</a>"&gt;</span></td></tr><tr><td class="line-number" value="441"></td><td class="line-content">  <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="442"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="443"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-scenario-group</span>"&gt;</span></td></tr><tr><td class="line-number" value="444"></td><td class="line-content">  <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-scenario g-scenario-1</span>"&gt;</span></td></tr><tr><td class="line-number" value="445"></td><td class="line-content">    <span class="html-tag">&lt;h3&gt;</span>Florida is a Must Win for Romney<span class="html-tag">&lt;/h3&gt;</span></td></tr><tr><td class="line-number" value="446"></td><td class="line-content">    <span class="html-tag">&lt;p&gt;</span>If Mr. Romney loses Florida, he has only one way to victory: through all the other battleground states. He has led most polls there, however, and is the favorite. If Mr. Romney wins Florida, he has 75 paths open to him.<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="447"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-preview</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="448"></td><td class="line-content">    <span class="html-tag">&lt;button <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-button</span>" <span class="html-attribute-name">data-view</span>="<span class="html-attribute-value">FL=dem</span>"&gt;</span>View Obama wins Florida<span class="html-tag">&lt;/button&gt;</span></td></tr><tr><td class="line-number" value="449"></td><td class="line-content">  <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="450"></td><td class="line-content">  <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-scenario g-scenario-2</span>"&gt;</span></td></tr><tr><td class="line-number" value="451"></td><td class="line-content">    <span class="html-tag">&lt;h3&gt;</span>Ohio: Obama's Firewall<span class="html-tag">&lt;/h3&gt;</span></td></tr><tr><td class="line-number" value="452"></td><td class="line-content">    <span class="html-tag">&lt;p&gt;</span>Of the three largest battleground states, Mr. Obama has the largest lead in Ohio â€“ partly because of a strong local economy and the auto industry bailout. If he loses here, it's likely he will trail in Florida and North Carolina too. Losing all three leaves him with only 14 ways to win.<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="453"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-preview</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="454"></td><td class="line-content">    <span class="html-tag">&lt;button <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-button</span>" <span class="html-attribute-name">data-view</span>="<span class="html-attribute-value">FL=rep&amp;OH=rep&amp;NC=rep</span>"&gt;</span>View Romney wins Ohio, Fla. &amp; N.C.<span class="html-tag">&lt;/button&gt;</span></td></tr><tr><td class="line-number" value="455"></td><td class="line-content">  <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="456"></td><td class="line-content">  <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-scenario g-scenario-3</span>"&gt;</span></td></tr><tr><td class="line-number" value="457"></td><td class="line-content">    <span class="html-tag">&lt;h3&gt;</span>Times's Battlegrounds<span class="html-tag">&lt;/h3&gt;</span></td></tr><tr><td class="line-number" value="458"></td><td class="line-content">    <span class="html-tag">&lt;p&gt;</span>Nine states are shown above, but The Times rates only seven of them as battlegrounds. If Nevada goes to Mr. Obama and North Carolina goes to Mr. Romney, as The Timesâ€™s ratings suggest, the president will have four times as many paths to victory as his opponent.<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="459"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-preview</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="460"></td><td class="line-content">    <span class="html-tag">&lt;button <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-button</span>" <span class="html-attribute-name">data-view</span>="<span class="html-attribute-value">NC=rep&amp;NV=dem</span>"&gt;</span>View Battleground States<span class="html-tag">&lt;/button&gt;</span></td></tr><tr><td class="line-number" value="461"></td><td class="line-content">  <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="462"></td><td class="line-content">  <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-scenario g-scenario-4</span>"&gt;</span></td></tr><tr><td class="line-number" value="463"></td><td class="line-content">    <span class="html-tag">&lt;h3&gt;</span>Edge of Your Seat Possibilities<span class="html-tag">&lt;/h3&gt;</span></td></tr><tr><td class="line-number" value="464"></td><td class="line-content">    <span class="html-tag">&lt;p&gt;</span>There are five paths to a tie. In this case, the newly elected House of Representatives would select the president (likely Mr. Romney) and the Senate would select the vice president (possibly Joseph R. Biden Jr.).<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="465"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">g-preview</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="466"></td><td class="line-content">  <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="467"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="468"></td><td class="line-content"><span class="html-comment">&lt;!--[if gt IE 8]&gt;&lt;!--&gt;</span></td></tr><tr><td class="line-number" value="469"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/d3.js">http://graphics8.nytimes.com/newsgraphics/2012/10/12/electoral-calculator/844a82453f26e9dda798a86b6fb690ca049e0a19/d3.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="470"></td><td class="line-content"><span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="471"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="472"></td><td class="line-content">(function() {</td></tr><tr><td class="line-number" value="473"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="474"></td><td class="line-content">var margin = {top: 85, right: 10, bottom: 40, left: 60},</td></tr><tr><td class="line-number" value="475"></td><td class="line-content">    width = 970 - margin.left - margin.right,</td></tr><tr><td class="line-number" value="476"></td><td class="line-content">    height = 650 - margin.top - margin.bottom;</td></tr><tr><td class="line-number" value="477"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="478"></td><td class="line-content">var numbers = ["no", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"],</td></tr><tr><td class="line-number" value="479"></td><td class="line-content">    formatCandidate = {dem: "Obama", rep: "Romney"},</td></tr><tr><td class="line-number" value="480"></td><td class="line-content">    formatNumber = function(d) { return numbers[d] || d; },</td></tr><tr><td class="line-number" value="481"></td><td class="line-content">    formatPercent = d3.format(".2p");</td></tr><tr><td class="line-number" value="482"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="483"></td><td class="line-content">var y = d3.scale.pow()</td></tr><tr><td class="line-number" value="484"></td><td class="line-content">    .exponent(2 / 3)</td></tr><tr><td class="line-number" value="485"></td><td class="line-content">    .domain([0, 9])</td></tr><tr><td class="line-number" value="486"></td><td class="line-content">    .rangeRound([0, height]);</td></tr><tr><td class="line-number" value="487"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="488"></td><td class="line-content">var w = d3.scale.linear()</td></tr><tr><td class="line-number" value="489"></td><td class="line-content">    .domain([0, 1])</td></tr><tr><td class="line-number" value="490"></td><td class="line-content">    .range([1, 32]);</td></tr><tr><td class="line-number" value="491"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="492"></td><td class="line-content">var svg = d3.select(".g-chart").append("svg")</td></tr><tr><td class="line-number" value="493"></td><td class="line-content">    .attr("width", width + margin.left + margin.right)</td></tr><tr><td class="line-number" value="494"></td><td class="line-content">    .attr("height", height + margin.top + margin.bottom)</td></tr><tr><td class="line-number" value="495"></td><td class="line-content">  .append("g")</td></tr><tr><td class="line-number" value="496"></td><td class="line-content">    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");</td></tr><tr><td class="line-number" value="497"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="498"></td><td class="line-content">// Per-type markers, as they don't inherit styles.</td></tr><tr><td class="line-number" value="499"></td><td class="line-content">svg.append("defs").selectAll("marker")</td></tr><tr><td class="line-number" value="500"></td><td class="line-content">    .data(["dem", "rep", "dem-active", "rep-active"])</td></tr><tr><td class="line-number" value="501"></td><td class="line-content">  .enter().append("marker")</td></tr><tr><td class="line-number" value="502"></td><td class="line-content">    .attr("id", function(d) { return "g-arrowhead-" + d; })</td></tr><tr><td class="line-number" value="503"></td><td class="line-content">    .attr("viewBox", "-.1 -5 10 10")</td></tr><tr><td class="line-number" value="504"></td><td class="line-content">    .attr("orient", "auto")</td></tr><tr><td class="line-number" value="505"></td><td class="line-content">  .append("path")</td></tr><tr><td class="line-number" value="506"></td><td class="line-content">    .attr("d", "M-.1,-4L3.9,0L-.1,4")</td></tr><tr><td class="line-number" value="507"></td><td class="line-content">    .attr("class", function(d) { return "g-marker g-" + d; });</td></tr><tr><td class="line-number" value="508"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="509"></td><td class="line-content">d3.tsv("states.tsv", function(error, states) {</td></tr><tr><td class="line-number" value="510"></td><td class="line-content">  var category = d3.scale.threshold()</td></tr><tr><td class="line-number" value="511"></td><td class="line-content">      .domain([.6, .75, .92]) // .9</td></tr><tr><td class="line-number" value="512"></td><td class="line-content">      .range(["tossup", "lean", "likely", "safe"]);</td></tr><tr><td class="line-number" value="513"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="514"></td><td class="line-content">  var root = {</td></tr><tr><td class="line-number" value="515"></td><td class="line-content">    demvotes: 0,</td></tr><tr><td class="line-number" value="516"></td><td class="line-content">    repvotes: 0,</td></tr><tr><td class="line-number" value="517"></td><td class="line-content">    probability: 1,</td></tr><tr><td class="line-number" value="518"></td><td class="line-content">    party: null,</td></tr><tr><td class="line-number" value="519"></td><td class="line-content">    state: {}</td></tr><tr><td class="line-number" value="520"></td><td class="line-content">  };</td></tr><tr><td class="line-number" value="521"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="522"></td><td class="line-content">  states.forEach(function(d) {</td></tr><tr><td class="line-number" value="523"></td><td class="line-content">    d.dem = +d.dem;</td></tr><tr><td class="line-number" value="524"></td><td class="line-content">    d.rep = +d.rep;</td></tr><tr><td class="line-number" value="525"></td><td class="line-content">    d.votes = +d.votes;</td></tr><tr><td class="line-number" value="526"></td><td class="line-content">    d.category = category(Math.max(d.dem, d.rep));</td></tr><tr><td class="line-number" value="527"></td><td class="line-content">    if (d.category === "safe") {</td></tr><tr><td class="line-number" value="528"></td><td class="line-content">      if (d.dem &gt; d.rep) root.demvotes += d.votes;</td></tr><tr><td class="line-number" value="529"></td><td class="line-content">      else root.repvotes += d.votes;</td></tr><tr><td class="line-number" value="530"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="531"></td><td class="line-content">  });</td></tr><tr><td class="line-number" value="532"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="533"></td><td class="line-content">  states = states</td></tr><tr><td class="line-number" value="534"></td><td class="line-content">      .filter(function(d) { return d.category !== "safe"; })</td></tr><tr><td class="line-number" value="535"></td><td class="line-content">      .sort(function(a, b) { return b.votes - a.votes || a.name.localeCompare(b.name); })</td></tr><tr><td class="line-number" value="536"></td><td class="line-content">      .map(function(d, i) { d.index = i; return d; });</td></tr><tr><td class="line-number" value="537"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="538"></td><td class="line-content">  var tree = d3.layout.tree()</td></tr><tr><td class="line-number" value="539"></td><td class="line-content">      .size([width, states.length])</td></tr><tr><td class="line-number" value="540"></td><td class="line-content">      .separation(function(a, b) { return (a.probability + b.probability + .1) * (states.length - a.depth + 1); })</td></tr><tr><td class="line-number" value="541"></td><td class="line-content">      .children(function(d, i) {</td></tr><tr><td class="line-number" value="542"></td><td class="line-content">        if (i &lt; states.length) {</td></tr><tr><td class="line-number" value="543"></td><td class="line-content">          var s = states[i];</td></tr><tr><td class="line-number" value="544"></td><td class="line-content">          return Math.max(d.demvotes, d.repvotes) &lt; 270 &amp;&amp; [</td></tr><tr><td class="line-number" value="545"></td><td class="line-content">            {party: "dem", state: s, probability: d.probability / 2, demvotes: d.demvotes + s.votes, repvotes: d.repvotes},</td></tr><tr><td class="line-number" value="546"></td><td class="line-content">            {party: "rep", state: s, probability: d.probability / 2, demvotes: d.demvotes, repvotes: d.repvotes + s.votes}</td></tr><tr><td class="line-number" value="547"></td><td class="line-content">          ];</td></tr><tr><td class="line-number" value="548"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="549"></td><td class="line-content">      });</td></tr><tr><td class="line-number" value="550"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="551"></td><td class="line-content">  var nodesByKey,</td></tr><tr><td class="line-number" value="552"></td><td class="line-content">      oldNodesByKey,</td></tr><tr><td class="line-number" value="553"></td><td class="line-content">      oldStates = states.slice(),</td></tr><tr><td class="line-number" value="554"></td><td class="line-content">      bisect = d3.bisector(function(d) { return d.index; }).left,</td></tr><tr><td class="line-number" value="555"></td><td class="line-content">      nodes = [],</td></tr><tr><td class="line-number" value="556"></td><td class="line-content">      links = [],</td></tr><tr><td class="line-number" value="557"></td><td class="line-content">      node = svg.selectAll(".g-node"),</td></tr><tr><td class="line-number" value="558"></td><td class="line-content">      link = svg.selectAll(".g-link"),</td></tr><tr><td class="line-number" value="559"></td><td class="line-content">      state = svg.selectAll(".g-state");</td></tr><tr><td class="line-number" value="560"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="561"></td><td class="line-content">  var resetButton = d3.select(".g-controls").append("a")</td></tr><tr><td class="line-number" value="562"></td><td class="line-content">      .attr("class", "g-reset")</td></tr><tr><td class="line-number" value="563"></td><td class="line-content">      .text("Reset")</td></tr><tr><td class="line-number" value="564"></td><td class="line-content">      .on("click", function() { reset(); transition(); });</td></tr><tr><td class="line-number" value="565"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="566"></td><td class="line-content">  var control = d3.select(".g-controls").selectAll(".g-control")</td></tr><tr><td class="line-number" value="567"></td><td class="line-content">      .data(states)</td></tr><tr><td class="line-number" value="568"></td><td class="line-content">    .enter().append("div")</td></tr><tr><td class="line-number" value="569"></td><td class="line-content">      .attr("class", "g-control");</td></tr><tr><td class="line-number" value="570"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="571"></td><td class="line-content">  var controlButton = control.selectAll("button")</td></tr><tr><td class="line-number" value="572"></td><td class="line-content">      .data(function(d) {</td></tr><tr><td class="line-number" value="573"></td><td class="line-content">        return ["dem", "rep"].map(function(o) {</td></tr><tr><td class="line-number" value="574"></td><td class="line-content">          return {state: d, outcome: o};</td></tr><tr><td class="line-number" value="575"></td><td class="line-content">        });</td></tr><tr><td class="line-number" value="576"></td><td class="line-content">      })</td></tr><tr><td class="line-number" value="577"></td><td class="line-content">    .enter().append("button")</td></tr><tr><td class="line-number" value="578"></td><td class="line-content">      .attr("class", function(d) { return "g-button g-" + d.outcome; })</td></tr><tr><td class="line-number" value="579"></td><td class="line-content">      .text(function(d) { return d.outcome; })</td></tr><tr><td class="line-number" value="580"></td><td class="line-content">      .on("click", function(view) { change(view); transition(); });</td></tr><tr><td class="line-number" value="581"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="582"></td><td class="line-content">  control.append("span")</td></tr><tr><td class="line-number" value="583"></td><td class="line-content">      .text(function(d) { return d.abbreviation; });</td></tr><tr><td class="line-number" value="584"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="585"></td><td class="line-content">  var scoreboard = svg.append("g")</td></tr><tr><td class="line-number" value="586"></td><td class="line-content">      .attr("class", "g-scoreboard")</td></tr><tr><td class="line-number" value="587"></td><td class="line-content">      .attr("transform", "translate(" + ((width + margin.left + margin.right) / 2 - margin.left) + ",0)");</td></tr><tr><td class="line-number" value="588"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="589"></td><td class="line-content">  var kicker = scoreboard.append("text")</td></tr><tr><td class="line-number" value="590"></td><td class="line-content">      .attr("class", "g-kicker")</td></tr><tr><td class="line-number" value="591"></td><td class="line-content">      .attr("y", -52);</td></tr><tr><td class="line-number" value="592"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="593"></td><td class="line-content">  scoreboard.append("rect")</td></tr><tr><td class="line-number" value="594"></td><td class="line-content">      .attr("x", -280)</td></tr><tr><td class="line-number" value="595"></td><td class="line-content">      .attr("y", -80)</td></tr><tr><td class="line-number" value="596"></td><td class="line-content">      .attr("width", 280 * 2)</td></tr><tr><td class="line-number" value="597"></td><td class="line-content">      .attr("height", 80)</td></tr><tr><td class="line-number" value="598"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="599"></td><td class="line-content">  scoreboard.append("path")</td></tr><tr><td class="line-number" value="600"></td><td class="line-content">      .attr("d", "M-280,0H-20l20,20L20,0H280");</td></tr><tr><td class="line-number" value="601"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="602"></td><td class="line-content">  var candidateScores = [</td></tr><tr><td class="line-number" value="603"></td><td class="line-content">    {party: "dem", position: -280, align: "start"},</td></tr><tr><td class="line-number" value="604"></td><td class="line-content">    {party: "rep", position: 280, align: "end"},</td></tr><tr><td class="line-number" value="605"></td><td class="line-content">    {party: "tie", position: null, align: "middle"}</td></tr><tr><td class="line-number" value="606"></td><td class="line-content">  ];</td></tr><tr><td class="line-number" value="607"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="608"></td><td class="line-content">  scoreboard.selectAll(".g-prefix")</td></tr><tr><td class="line-number" value="609"></td><td class="line-content">      .data(candidateScores)</td></tr><tr><td class="line-number" value="610"></td><td class="line-content">    .enter().append("text")</td></tr><tr><td class="line-number" value="611"></td><td class="line-content">      .attr("class", function(d) { return "g-" + d.party + " g-prefix"; })</td></tr><tr><td class="line-number" value="612"></td><td class="line-content">      .attr("x", function(d) { return d.position; })</td></tr><tr><td class="line-number" value="613"></td><td class="line-content">      .attr("y", "-1.2em")</td></tr><tr><td class="line-number" value="614"></td><td class="line-content">      .style("text-anchor", function(d) { return d.align; })</td></tr><tr><td class="line-number" value="615"></td><td class="line-content">      .text(function(d) { return d.party === "tie" ? "" : formatCandidate[d.party] + " has "; });</td></tr><tr><td class="line-number" value="616"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="617"></td><td class="line-content">  scoreboard.selectAll(".g-prefix").append("tspan")</td></tr><tr><td class="line-number" value="618"></td><td class="line-content">      .attr("class", "g-score");</td></tr><tr><td class="line-number" value="619"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="620"></td><td class="line-content">  scoreboard.selectAll(".g-prefix").append("tspan")</td></tr><tr><td class="line-number" value="621"></td><td class="line-content">      .attr("class", "g-suffix");</td></tr><tr><td class="line-number" value="622"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="623"></td><td class="line-content">  scoreboard.append("text")</td></tr><tr><td class="line-number" value="624"></td><td class="line-content">      .attr("class", "g-ratio g-dem")</td></tr><tr><td class="line-number" value="625"></td><td class="line-content">      .attr("y", "-0.8em")</td></tr><tr><td class="line-number" value="626"></td><td class="line-content">      .attr("x", -168);</td></tr><tr><td class="line-number" value="627"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="628"></td><td class="line-content">  scoreboard.append("text")</td></tr><tr><td class="line-number" value="629"></td><td class="line-content">      .attr("class", "g-ratio g-rep")</td></tr><tr><td class="line-number" value="630"></td><td class="line-content">      .attr("y", "-0.8em")</td></tr><tr><td class="line-number" value="631"></td><td class="line-content">      .attr("x", 170);</td></tr><tr><td class="line-number" value="632"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="633"></td><td class="line-content">  scoreboard.append("text")</td></tr><tr><td class="line-number" value="634"></td><td class="line-content">      .attr("class", "g-ratio g-tie")</td></tr><tr><td class="line-number" value="635"></td><td class="line-content">      .attr("y", "-0.8em");</td></tr><tr><td class="line-number" value="636"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="637"></td><td class="line-content">  var endAlert = svg.append("text")</td></tr><tr><td class="line-number" value="638"></td><td class="line-content">      .attr("class", "g-alert")</td></tr><tr><td class="line-number" value="639"></td><td class="line-content">      .attr("transform", "translate(" + ((width + margin.left + margin.right) / 2 - margin.left) + ",35)");</td></tr><tr><td class="line-number" value="640"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="641"></td><td class="line-content">  endAlert.append("tspan")</td></tr><tr><td class="line-number" value="642"></td><td class="line-content">      .attr("x", 0)</td></tr><tr><td class="line-number" value="643"></td><td class="line-content">      .text("With these selections,");</td></tr><tr><td class="line-number" value="644"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="645"></td><td class="line-content">  endAlert.append("tspan")</td></tr><tr><td class="line-number" value="646"></td><td class="line-content">      .attr("class", "g-output")</td></tr><tr><td class="line-number" value="647"></td><td class="line-content">      .attr("x", 0)</td></tr><tr><td class="line-number" value="648"></td><td class="line-content">      .attr("y", "1.5em")</td></tr><tr><td class="line-number" value="649"></td><td class="line-content">      .attr("class", "g-output");</td></tr><tr><td class="line-number" value="650"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="651"></td><td class="line-content">  var scenarioButton = d3.selectAll(".g-scenario .g-button")</td></tr><tr><td class="line-number" value="652"></td><td class="line-content">      .on("click", function() {</td></tr><tr><td class="line-number" value="653"></td><td class="line-content">        var outcome = {};</td></tr><tr><td class="line-number" value="654"></td><td class="line-content">        this.getAttribute("data-view").split("&amp;").forEach(function(view) { outcome[view.substring(0, 2)] = view.substring(3); });</td></tr><tr><td class="line-number" value="655"></td><td class="line-content">        controlButton.filter(function(d) {</td></tr><tr><td class="line-number" value="656"></td><td class="line-content">          return d.state.enabledParty != outcome[d.state.code]</td></tr><tr><td class="line-number" value="657"></td><td class="line-content">              &amp;&amp; (!outcome[d.state.code] &amp;&amp; d.state.enabledParty</td></tr><tr><td class="line-number" value="658"></td><td class="line-content">                ? d.outcome === d.state.enabledParty</td></tr><tr><td class="line-number" value="659"></td><td class="line-content">                : d.outcome === outcome[d.state.code]);</td></tr><tr><td class="line-number" value="660"></td><td class="line-content">        }).each(change);</td></tr><tr><td class="line-number" value="661"></td><td class="line-content">        transition();</td></tr><tr><td class="line-number" value="662"></td><td class="line-content">      });</td></tr><tr><td class="line-number" value="663"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="664"></td><td class="line-content">  update();</td></tr><tr><td class="line-number" value="665"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="666"></td><td class="line-content">  function update() {</td></tr><tr><td class="line-number" value="667"></td><td class="line-content">    root.children = null;</td></tr><tr><td class="line-number" value="668"></td><td class="line-content">    nodes = tree.size([width, 1]).nodes(root);</td></tr><tr><td class="line-number" value="669"></td><td class="line-content">    links = tree.links(nodes).reverse();</td></tr><tr><td class="line-number" value="670"></td><td class="line-content">    root.x = (width + margin.right - margin.left) / 2;</td></tr><tr><td class="line-number" value="671"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="672"></td><td class="line-content">    //</td></tr><tr><td class="line-number" value="673"></td><td class="line-content">    nodesByKey = {};</td></tr><tr><td class="line-number" value="674"></td><td class="line-content">    nodes.forEach(function(d) { nodesByKey[d.key = key(d)] = d; });</td></tr><tr><td class="line-number" value="675"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="676"></td><td class="line-content">    updateStates();</td></tr><tr><td class="line-number" value="677"></td><td class="line-content">    updateNodes();</td></tr><tr><td class="line-number" value="678"></td><td class="line-content">    updateLinks();</td></tr><tr><td class="line-number" value="679"></td><td class="line-content">    updateVoronoi();</td></tr><tr><td class="line-number" value="680"></td><td class="line-content">    updateScoreboard();</td></tr><tr><td class="line-number" value="681"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="682"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="683"></td><td class="line-content">  function updateStates() {</td></tr><tr><td class="line-number" value="684"></td><td class="line-content">    state = state.data(states, function(d) { return d.code; });</td></tr><tr><td class="line-number" value="685"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="686"></td><td class="line-content">    d3.transition(state.exit())</td></tr><tr><td class="line-number" value="687"></td><td class="line-content">        .style("fill-opacity", 1e-6)</td></tr><tr><td class="line-number" value="688"></td><td class="line-content">        .attr("transform", function(d) { return "translate(" + (-margin.left + 10) + "," + y(bisect(states, d.index)) + ")"; })</td></tr><tr><td class="line-number" value="689"></td><td class="line-content">        .remove();</td></tr><tr><td class="line-number" value="690"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="691"></td><td class="line-content">    var stateEnter = state.enter().insert("g", ".g-scoreboard,.g-node,.g-link")</td></tr><tr><td class="line-number" value="692"></td><td class="line-content">        .style("fill-opacity", 1e-6)</td></tr><tr><td class="line-number" value="693"></td><td class="line-content">        .attr("class", "g-state")</td></tr><tr><td class="line-number" value="694"></td><td class="line-content">        .attr("transform", function(d) { return "translate(" + (-margin.left + 10) + "," + y(bisect(oldStates, d.index)) + ")"; });</td></tr><tr><td class="line-number" value="695"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="696"></td><td class="line-content">    d3.transition(state)</td></tr><tr><td class="line-number" value="697"></td><td class="line-content">        .style("fill-opacity", 1)</td></tr><tr><td class="line-number" value="698"></td><td class="line-content">        .attr("transform", function(d, i) { return "translate(" + (-margin.left + 10) + "," + y(i + 1) + ")"; });</td></tr><tr><td class="line-number" value="699"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="700"></td><td class="line-content">    stateEnter.append("line")</td></tr><tr><td class="line-number" value="701"></td><td class="line-content">        .attr("x2", width + margin.left - 10);</td></tr><tr><td class="line-number" value="702"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="703"></td><td class="line-content">    stateEnter.append("rect")</td></tr><tr><td class="line-number" value="704"></td><td class="line-content">        .attr("y", -16)</td></tr><tr><td class="line-number" value="705"></td><td class="line-content">        .attr("width", 12)</td></tr><tr><td class="line-number" value="706"></td><td class="line-content">        .attr("height", 12);</td></tr><tr><td class="line-number" value="707"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="708"></td><td class="line-content">    stateEnter.selectAll("text")</td></tr><tr><td class="line-number" value="709"></td><td class="line-content">        .data(["dem", "rep"])</td></tr><tr><td class="line-number" value="710"></td><td class="line-content">      .enter().append("text")</td></tr><tr><td class="line-number" value="711"></td><td class="line-content">        .attr("class", function(d) { return "g-" + d; })</td></tr><tr><td class="line-number" value="712"></td><td class="line-content">        .attr("y", -6)</td></tr><tr><td class="line-number" value="713"></td><td class="line-content">        .attr("x", 6)</td></tr><tr><td class="line-number" value="714"></td><td class="line-content">        .style("text-anchor", "middle")</td></tr><tr><td class="line-number" value="715"></td><td class="line-content">        .text(function(d) { return d.substring(0, 1).toUpperCase(); });</td></tr><tr><td class="line-number" value="716"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="717"></td><td class="line-content">    stateEnter.append("text")</td></tr><tr><td class="line-number" value="718"></td><td class="line-content">        .attr("x", 16)</td></tr><tr><td class="line-number" value="719"></td><td class="line-content">        .attr("y", -6)</td></tr><tr><td class="line-number" value="720"></td><td class="line-content">        .text(function(d) { return d.name; });</td></tr><tr><td class="line-number" value="721"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="722"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="723"></td><td class="line-content">  function updateLinks() {</td></tr><tr><td class="line-number" value="724"></td><td class="line-content">    link = link.data(links, function(d) { return d.target.key; });</td></tr><tr><td class="line-number" value="725"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="726"></td><td class="line-content">    var linkEnter = link.enter().insert("path", ".g-node")</td></tr><tr><td class="line-number" value="727"></td><td class="line-content">        .attr("d", function(d) { var p = findOldParent(d.target); return diagonal({source: p, target: p}); })</td></tr><tr><td class="line-number" value="728"></td><td class="line-content">        .attr("class", function(d) { return "g-link g-" + d.target.party; })</td></tr><tr><td class="line-number" value="729"></td><td class="line-content">        .attr("marker-end", function(d) { return "url(#g-arrowhead-" + d.target.party + ")"; });</td></tr><tr><td class="line-number" value="730"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="731"></td><td class="line-content">    d3.transition(link.exit())</td></tr><tr><td class="line-number" value="732"></td><td class="line-content">        .attr("d", function(d) { var p = findParent(d.target); return diagonal({source: p, target: p}); })</td></tr><tr><td class="line-number" value="733"></td><td class="line-content">        .remove();</td></tr><tr><td class="line-number" value="734"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="735"></td><td class="line-content">    d3.selectAll(".g-link")</td></tr><tr><td class="line-number" value="736"></td><td class="line-content">        .sort(ascendingDepth);</td></tr><tr><td class="line-number" value="737"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="738"></td><td class="line-content">    d3.transition(link)</td></tr><tr><td class="line-number" value="739"></td><td class="line-content">        .attr("d", diagonal)</td></tr><tr><td class="line-number" value="740"></td><td class="line-content">        .style("stroke-width", function(d) { return w(d.target.probability) + "px"; });</td></tr><tr><td class="line-number" value="741"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="742"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="743"></td><td class="line-content">  function updateNodes() {</td></tr><tr><td class="line-number" value="744"></td><td class="line-content">    node = node.data(nodes.slice(1), function(d) { return d.key; })</td></tr><tr><td class="line-number" value="745"></td><td class="line-content">        .each(function(d) { d.update = true; });</td></tr><tr><td class="line-number" value="746"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="747"></td><td class="line-content">    var nodeExit = d3.transition(node.exit())</td></tr><tr><td class="line-number" value="748"></td><td class="line-content">        .attr("class", function(d) { return "g-node g-" + d.party; })</td></tr><tr><td class="line-number" value="749"></td><td class="line-content">        .attr("transform", function(d) { var p = findParent(d); return "translate(" + p.x + "," + y(p.depth) + ")"; })</td></tr><tr><td class="line-number" value="750"></td><td class="line-content">        .remove();</td></tr><tr><td class="line-number" value="751"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="752"></td><td class="line-content">    var nodeEnter = node.enter().insert("g", ".g-scoreboard")</td></tr><tr><td class="line-number" value="753"></td><td class="line-content">        .attr("class", function(d) { return "g-node g-" + d.party; })</td></tr><tr><td class="line-number" value="754"></td><td class="line-content">        .attr("transform", function(d) { var p = findOldParent(d); return "translate(" + p.x + "," + y(p.depth) + ")"; });</td></tr><tr><td class="line-number" value="755"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="756"></td><td class="line-content">    d3.transition(node)</td></tr><tr><td class="line-number" value="757"></td><td class="line-content">        .attr("class", function(d) { return "g-node g-" + d.party + (d.depth === 1 ? " g-first" : ""); })</td></tr><tr><td class="line-number" value="758"></td><td class="line-content">        .attr("transform", function(d) { return "translate(" + d.x + "," + y(d.depth) + ")"; });</td></tr><tr><td class="line-number" value="759"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="760"></td><td class="line-content">    updateLabels(nodeEnter, nodeExit);</td></tr><tr><td class="line-number" value="761"></td><td class="line-content">    updateLeaves(nodeEnter, nodeExit);</td></tr><tr><td class="line-number" value="762"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="763"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="764"></td><td class="line-content">  function updateLabels(nodeEnter, nodeExit) {</td></tr><tr><td class="line-number" value="765"></td><td class="line-content">    var textEnter = nodeEnter.append("text").classed("g-label", true).attr("y", -6);</td></tr><tr><td class="line-number" value="766"></td><td class="line-content">    textEnter.append("tspan").attr("class", "g-label-line1");</td></tr><tr><td class="line-number" value="767"></td><td class="line-content">    textEnter.append("tspan").attr("class", "g-label-line2").attr("x", 0).attr("dy", ".71em");</td></tr><tr><td class="line-number" value="768"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="769"></td><td class="line-content">    node.select(".g-label-line1")</td></tr><tr><td class="line-number" value="770"></td><td class="line-content">        .attr("y", function(d) { return d.children ? null : -radius(d.depth) - 3; })</td></tr><tr><td class="line-number" value="771"></td><td class="line-content">        .text(function(d) {</td></tr><tr><td class="line-number" value="772"></td><td class="line-content">          var firstOfParty = true, p = d.parent;</td></tr><tr><td class="line-number" value="773"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="774"></td><td class="line-content">          while (p &amp;&amp; p.parent &amp;&amp; firstOfParty) {</td></tr><tr><td class="line-number" value="775"></td><td class="line-content">            if (p.party === d.party) firstOfParty = false;</td></tr><tr><td class="line-number" value="776"></td><td class="line-content">            p = p.parent;</td></tr><tr><td class="line-number" value="777"></td><td class="line-content">          }</td></tr><tr><td class="line-number" value="778"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="779"></td><td class="line-content">          return firstOfParty ? "If " + formatCandidate[d.party] + " wins " + d.state.name + "\u2026"</td></tr><tr><td class="line-number" value="780"></td><td class="line-content">              : d.children ? " " + d.state.abbreviation + ","</td></tr><tr><td class="line-number" value="781"></td><td class="line-content">              : " and " + d.state.abbreviation + ",";</td></tr><tr><td class="line-number" value="782"></td><td class="line-content">        });</td></tr><tr><td class="line-number" value="783"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="784"></td><td class="line-content">    node.select(".g-label-line2")</td></tr><tr><td class="line-number" value="785"></td><td class="line-content">        .attr("y", function(d) { return radius(d.depth) + 3; })</td></tr><tr><td class="line-number" value="786"></td><td class="line-content">        .text(function(d) {</td></tr><tr><td class="line-number" value="787"></td><td class="line-content">          return d.children ? null : (d.demvotes === d.repvotes ? " the candidates tie." : formatCandidate[d.party] + " wins.");</td></tr><tr><td class="line-number" value="788"></td><td class="line-content">        });</td></tr><tr><td class="line-number" value="789"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="790"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="791"></td><td class="line-content">  function updateLeaves(nodeEnter, nodeExit) {</td></tr><tr><td class="line-number" value="792"></td><td class="line-content">    var leaf = node.selectAll(".g-leaf")</td></tr><tr><td class="line-number" value="793"></td><td class="line-content">        .data(function(d) { return d.children ? [] : [d]; });</td></tr><tr><td class="line-number" value="794"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="795"></td><td class="line-content">    var leafEnter = leaf.enter().insert("g", "text")</td></tr><tr><td class="line-number" value="796"></td><td class="line-content">        .attr("class", function(d) { return "g-leaf" + (d.demvotes === d.repvotes ? " g-tie" : ""); })</td></tr><tr><td class="line-number" value="797"></td><td class="line-content">        .attr("transform", "scale(0)");</td></tr><tr><td class="line-number" value="798"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="799"></td><td class="line-content">    leafEnter.append("circle")</td></tr><tr><td class="line-number" value="800"></td><td class="line-content">        .attr("r", 50);</td></tr><tr><td class="line-number" value="801"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="802"></td><td class="line-content">    leafEnter.append("path")</td></tr><tr><td class="line-number" value="803"></td><td class="line-content">        .attr("class", "g-check")</td></tr><tr><td class="line-number" value="804"></td><td class="line-content">        .attr("transform", "translate(-8,16)")</td></tr><tr><td class="line-number" value="805"></td><td class="line-content">        .attr("d", "M-20,-20L0,0L38,-38");</td></tr><tr><td class="line-number" value="806"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="807"></td><td class="line-content">    d3.transition(leaf.exit())</td></tr><tr><td class="line-number" value="808"></td><td class="line-content">        .attr("transform", "scale(0)")</td></tr><tr><td class="line-number" value="809"></td><td class="line-content">        .remove();</td></tr><tr><td class="line-number" value="810"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="811"></td><td class="line-content">    nodeExit.select(".g-leaf")</td></tr><tr><td class="line-number" value="812"></td><td class="line-content">        .attr("transform", "scale(0)");</td></tr><tr><td class="line-number" value="813"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="814"></td><td class="line-content">    d3.transition(leaf)</td></tr><tr><td class="line-number" value="815"></td><td class="line-content">        .attr("transform", function(d) { return "scale(" + radius(d.depth) + ")scale(.02)"; });</td></tr><tr><td class="line-number" value="816"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="817"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="818"></td><td class="line-content">  function updateVoronoi() {</td></tr><tr><td class="line-number" value="819"></td><td class="line-content">    svg.select(".g-voronoi").remove();</td></tr><tr><td class="line-number" value="820"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="821"></td><td class="line-content">    svg.append("g")</td></tr><tr><td class="line-number" value="822"></td><td class="line-content">        .attr("class", "g-voronoi")</td></tr><tr><td class="line-number" value="823"></td><td class="line-content">        .call(voronoi, nodes);</td></tr><tr><td class="line-number" value="824"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="825"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="826"></td><td class="line-content">  function updateScoreboard() {</td></tr><tr><td class="line-number" value="827"></td><td class="line-content">    var demPaths = 0,</td></tr><tr><td class="line-number" value="828"></td><td class="line-content">        repPaths = 0,</td></tr><tr><td class="line-number" value="829"></td><td class="line-content">        tiePaths = 0;</td></tr><tr><td class="line-number" value="830"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="831"></td><td class="line-content">    nodes.forEach(function(d) {</td></tr><tr><td class="line-number" value="832"></td><td class="line-content">      if (!d.children) {</td></tr><tr><td class="line-number" value="833"></td><td class="line-content">        var n = Math.pow(2, states.length - d.depth);</td></tr><tr><td class="line-number" value="834"></td><td class="line-content">        if (d.demvotes &gt; d.repvotes) demPaths += n;</td></tr><tr><td class="line-number" value="835"></td><td class="line-content">        else if (d.repvotes &gt; d.demvotes) repPaths += n;</td></tr><tr><td class="line-number" value="836"></td><td class="line-content">        else tiePaths += n;</td></tr><tr><td class="line-number" value="837"></td><td class="line-content">      }</td></tr><tr><td class="line-number" value="838"></td><td class="line-content">    });</td></tr><tr><td class="line-number" value="839"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="840"></td><td class="line-content">    //</td></tr><tr><td class="line-number" value="841"></td><td class="line-content">    kicker.text("With " + formatNumber(states.length) + " state" + (states.length &gt; 1 ? "s" : "") + " undecided:");</td></tr><tr><td class="line-number" value="842"></td><td class="line-content">    scoreboard.select(".g-prefix.g-dem .g-score").text(demPaths);</td></tr><tr><td class="line-number" value="843"></td><td class="line-content">    scoreboard.select(".g-prefix.g-dem .g-suffix").text(" way" + ((demPaths === 1) ? "" : "s") + " to win");</td></tr><tr><td class="line-number" value="844"></td><td class="line-content">    scoreboard.select(".g-prefix.g-rep .g-score").text(repPaths);</td></tr><tr><td class="line-number" value="845"></td><td class="line-content">    scoreboard.select(".g-prefix.g-rep .g-suffix").text(" way" + ((repPaths === 1) ? "" : "s") + " to win");</td></tr><tr><td class="line-number" value="846"></td><td class="line-content">    scoreboard.select(".g-prefix.g-tie .g-score").text(tiePaths);</td></tr><tr><td class="line-number" value="847"></td><td class="line-content">    scoreboard.select(".g-prefix.g-tie .g-suffix").text(" tie" + ((tiePaths === 1) ? "" : "s"));</td></tr><tr><td class="line-number" value="848"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="849"></td><td class="line-content">    //</td></tr><tr><td class="line-number" value="850"></td><td class="line-content">    var totalPaths = 1 &lt;&lt; states.length;</td></tr><tr><td class="line-number" value="851"></td><td class="line-content">    scoreboard.select(".g-dem.g-ratio").text(formatPercent(demPaths / totalPaths) + " of paths");</td></tr><tr><td class="line-number" value="852"></td><td class="line-content">    scoreboard.select(".g-rep.g-ratio").text(formatPercent(repPaths / totalPaths) + " of paths");</td></tr><tr><td class="line-number" value="853"></td><td class="line-content">    scoreboard.select(".g-tie.g-ratio").text(formatPercent(tiePaths / totalPaths) + " of paths");</td></tr><tr><td class="line-number" value="854"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="855"></td><td class="line-content">    if (nodes.length === 1) {</td></tr><tr><td class="line-number" value="856"></td><td class="line-content">      endAlert.select(".g-output").text((root.demvotes &gt; root.repvotes ? "Obama wins" : root.demvotes &lt; root.repvotes ? "Romney wins" : "the candidates tie") + " in all scenarios.");</td></tr><tr><td class="line-number" value="857"></td><td class="line-content">      endAlert.transition().style("opacity", 1);</td></tr><tr><td class="line-number" value="858"></td><td class="line-content">      if (root.demvotes &gt; root.repvotes) {</td></tr><tr><td class="line-number" value="859"></td><td class="line-content">        d3.select(".g-heads .g-dem").style("opacity", 1).style("left", "-100px");</td></tr><tr><td class="line-number" value="860"></td><td class="line-content">        d3.select(".g-heads .g-rep").style("opacity", 0).style("left", "-100px");</td></tr><tr><td class="line-number" value="861"></td><td class="line-content">      } else if (root.demvotes &lt; root.repvotes) {</td></tr><tr><td class="line-number" value="862"></td><td class="line-content">        d3.select(".g-heads .g-rep").style("opacity", 1).style("left", "-100px");</td></tr><tr><td class="line-number" value="863"></td><td class="line-content">        d3.select(".g-heads .g-dem").style("opacity", 0).style("left", "-100px");</td></tr><tr><td class="line-number" value="864"></td><td class="line-content">      } else {</td></tr><tr><td class="line-number" value="865"></td><td class="line-content">        d3.select(".g-heads .g-dem").style("opacity", 1).style("left", "-220px");</td></tr><tr><td class="line-number" value="866"></td><td class="line-content">        d3.select(".g-heads .g-rep").style("opacity", 1).style("left", "20px");</td></tr><tr><td class="line-number" value="867"></td><td class="line-content">      }</td></tr><tr><td class="line-number" value="868"></td><td class="line-content">    } else {</td></tr><tr><td class="line-number" value="869"></td><td class="line-content">      endAlert.transition().style("opacity", 0);</td></tr><tr><td class="line-number" value="870"></td><td class="line-content">      d3.select(".g-heads .g-dem").style("opacity", 0);</td></tr><tr><td class="line-number" value="871"></td><td class="line-content">      d3.select(".g-heads .g-rep").style("opacity", 0);</td></tr><tr><td class="line-number" value="872"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="873"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="874"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="875"></td><td class="line-content">  function reset() {</td></tr><tr><td class="line-number" value="876"></td><td class="line-content">    controlButton.filter(function(d) { return d.outcome === d.state.enabledParty; }).each(change);</td></tr><tr><td class="line-number" value="877"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="878"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="879"></td><td class="line-content">  function change(view) {</td></tr><tr><td class="line-number" value="880"></td><td class="line-content">    var key = view.state.code + "=" + view.outcome;</td></tr><tr><td class="line-number" value="881"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="882"></td><td class="line-content">    if (view.state.enabledParty) {</td></tr><tr><td class="line-number" value="883"></td><td class="line-content">      root[view.state.enabledParty + "votes"] -= view.state.votes;</td></tr><tr><td class="line-number" value="884"></td><td class="line-content">      states.splice(bisect(states, view.state.index), 0, view.state);</td></tr><tr><td class="line-number" value="885"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="886"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="887"></td><td class="line-content">    var i = bisect(oldStates, view.state.index) + 1;</td></tr><tr><td class="line-number" value="888"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="889"></td><td class="line-content">    if (view.outcome === view.state.enabledParty) {</td></tr><tr><td class="line-number" value="890"></td><td class="line-content">      view.state.enabledParty = null;</td></tr><tr><td class="line-number" value="891"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="892"></td><td class="line-content">      // Add the exiting state to nodes below.</td></tr><tr><td class="line-number" value="893"></td><td class="line-content">      nodes.forEach(function(d) {</td></tr><tr><td class="line-number" value="894"></td><td class="line-content">        if (d.depth &gt;= i) d.key = d.key.split("&amp;").concat(key).sort().join("&amp;");</td></tr><tr><td class="line-number" value="895"></td><td class="line-content">      });</td></tr><tr><td class="line-number" value="896"></td><td class="line-content">    } else {</td></tr><tr><td class="line-number" value="897"></td><td class="line-content">      if ((root[view.outcome + "votes"] += view.state.votes) &gt;= 270) root.party = view.outcome;</td></tr><tr><td class="line-number" value="898"></td><td class="line-content">      view.state.enabledParty = view.outcome;</td></tr><tr><td class="line-number" value="899"></td><td class="line-content">      states.splice(states.indexOf(view.state), 1);</td></tr><tr><td class="line-number" value="900"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="901"></td><td class="line-content">      // Remove the entering state from nodes below.</td></tr><tr><td class="line-number" value="902"></td><td class="line-content">      var k = new RegExp("&amp;" + key + "|" + key + "&amp;");</td></tr><tr><td class="line-number" value="903"></td><td class="line-content">      nodes.forEach(function(d) {</td></tr><tr><td class="line-number" value="904"></td><td class="line-content">        if (d.depth &gt; i) d.key = d.key.replace(k, "");</td></tr><tr><td class="line-number" value="905"></td><td class="line-content">      });</td></tr><tr><td class="line-number" value="906"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="907"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="908"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="909"></td><td class="line-content">  function transition() {</td></tr><tr><td class="line-number" value="910"></td><td class="line-content">    controlButton.classed("g-active", function(d) { return d.state.enabledParty === d.outcome; });</td></tr><tr><td class="line-number" value="911"></td><td class="line-content">    resetButton.style("display", states.length &lt; y.domain()[1] ? "block" : "none");</td></tr><tr><td class="line-number" value="912"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="913"></td><td class="line-content">    // Old node positions indexed by new key are needed for enter transitions.</td></tr><tr><td class="line-number" value="914"></td><td class="line-content">    oldNodesByKey = {};</td></tr><tr><td class="line-number" value="915"></td><td class="line-content">    nodes.forEach(function(d) { oldNodesByKey[d.key] = d; });</td></tr><tr><td class="line-number" value="916"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="917"></td><td class="line-content">    d3.transition().duration(d3.event.altKey ? 7500 : 750).each(update);</td></tr><tr><td class="line-number" value="918"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="919"></td><td class="line-content">    // The previous states are needed when multiple changes are made pre-transition.</td></tr><tr><td class="line-number" value="920"></td><td class="line-content">    oldStates = states.slice();</td></tr><tr><td class="line-number" value="921"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="922"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="923"></td><td class="line-content">  function click(d) {</td></tr><tr><td class="line-number" value="924"></td><td class="line-content">    mouseout(d);</td></tr><tr><td class="line-number" value="925"></td><td class="line-content">    var p = d.parent;</td></tr><tr><td class="line-number" value="926"></td><td class="line-content">    while (p) {</td></tr><tr><td class="line-number" value="927"></td><td class="line-content">      if (p.parent === root) { d = p; break; }</td></tr><tr><td class="line-number" value="928"></td><td class="line-content">      p = p.parent;</td></tr><tr><td class="line-number" value="929"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="930"></td><td class="line-content">    if (d !== root) {</td></tr><tr><td class="line-number" value="931"></td><td class="line-content">      change({state: d.state, outcome: d.party});</td></tr><tr><td class="line-number" value="932"></td><td class="line-content">      transition();</td></tr><tr><td class="line-number" value="933"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="934"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="935"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="936"></td><td class="line-content">  function mouseover(d) {</td></tr><tr><td class="line-number" value="937"></td><td class="line-content">    activate(d, true);</td></tr><tr><td class="line-number" value="938"></td><td class="line-content">    svg.attr("class", "g-" + d.party);</td></tr><tr><td class="line-number" value="939"></td><td class="line-content">    node.filter(function(d) { return d.active; }).classed("g-active", true);</td></tr><tr><td class="line-number" value="940"></td><td class="line-content">    link.filter(function(d) { return d.target.active; }).classed("g-active", true).attr("marker-end", function(d) { return "url(#g-arrowhead-" + d.target.party + "-active)"; });</td></tr><tr><td class="line-number" value="941"></td><td class="line-content">    state.attr("class", function(d) { return "g-state" + (d.activeParty ? " g-" + d.activeParty : ""); });</td></tr><tr><td class="line-number" value="942"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="943"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="944"></td><td class="line-content">  function mouseout(d) {</td></tr><tr><td class="line-number" value="945"></td><td class="line-content">    node.filter(function(d) { return d.active; }).classed("g-active", false);</td></tr><tr><td class="line-number" value="946"></td><td class="line-content">    link.filter(function(d) { return d.target.active; }).classed("g-active", false).attr("marker-end", function(d) { return "url(#g-arrowhead-" + d.target.party + ")"; });</td></tr><tr><td class="line-number" value="947"></td><td class="line-content">    state.attr("class", "g-state");</td></tr><tr><td class="line-number" value="948"></td><td class="line-content">    activate(d, false);</td></tr><tr><td class="line-number" value="949"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="950"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="951"></td><td class="line-content">  function activate(d, active) {</td></tr><tr><td class="line-number" value="952"></td><td class="line-content">    d.active = active;</td></tr><tr><td class="line-number" value="953"></td><td class="line-content">    d.state.activeParty = active ? d.party : null;</td></tr><tr><td class="line-number" value="954"></td><td class="line-content">    d.parent &amp;&amp; activate(d.parent, active);</td></tr><tr><td class="line-number" value="955"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="956"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="957"></td><td class="line-content">  function voronoi(g, nodes) {</td></tr><tr><td class="line-number" value="958"></td><td class="line-content">    nodes = nodes.filter(function(d) { return !d.children; });</td></tr><tr><td class="line-number" value="959"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="960"></td><td class="line-content">    var x0 = -margin.left, y0 = 0,</td></tr><tr><td class="line-number" value="961"></td><td class="line-content">        x1 = width + margin.right, y1 = height + margin.left,</td></tr><tr><td class="line-number" value="962"></td><td class="line-content">        xy = d3.geom.polygon([[x0, y0], [x0, y1], [x1, y1], [x1, y0]]);</td></tr><tr><td class="line-number" value="963"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="964"></td><td class="line-content">    var path = g.selectAll("path")</td></tr><tr><td class="line-number" value="965"></td><td class="line-content">        .data(d3.geom.voronoi(nodes.map(function(d) { return [d.x, y(d.depth)]; })));</td></tr><tr><td class="line-number" value="966"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="967"></td><td class="line-content">    path.enter().append("path")</td></tr><tr><td class="line-number" value="968"></td><td class="line-content">        .on("mouseover", mouseover)</td></tr><tr><td class="line-number" value="969"></td><td class="line-content">        .on("mouseout", mouseout)</td></tr><tr><td class="line-number" value="970"></td><td class="line-content">        .on("mousedown", function() { d3.event.preventDefault(); })</td></tr><tr><td class="line-number" value="971"></td><td class="line-content">        .on("dblclick", click);</td></tr><tr><td class="line-number" value="972"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="973"></td><td class="line-content">    path.attr("d", function(d) { return "M" + xy.clip(d).join("L") + "Z"; })</td></tr><tr><td class="line-number" value="974"></td><td class="line-content">        .datum(function(d, i) { return nodes[i]; });</td></tr><tr><td class="line-number" value="975"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="976"></td><td class="line-content">    path.exit().remove();</td></tr><tr><td class="line-number" value="977"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="978"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="979"></td><td class="line-content">  function key(d) {</td></tr><tr><td class="line-number" value="980"></td><td class="line-content">    if (!d.parent) return "_root";</td></tr><tr><td class="line-number" value="981"></td><td class="line-content">    var k = [], p = d;</td></tr><tr><td class="line-number" value="982"></td><td class="line-content">    while (p &amp;&amp; p.party) k.push(p.state.code + "=" + p.party), p = p.parent;</td></tr><tr><td class="line-number" value="983"></td><td class="line-content">    return k.sort().join("&amp;");</td></tr><tr><td class="line-number" value="984"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="985"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="986"></td><td class="line-content">  function findParent(d) {</td></tr><tr><td class="line-number" value="987"></td><td class="line-content">    var p = d.parent;</td></tr><tr><td class="line-number" value="988"></td><td class="line-content">    while (p) {</td></tr><tr><td class="line-number" value="989"></td><td class="line-content">      if ((d = nodesByKey[p.key]) &amp;&amp; d.update) return d;</td></tr><tr><td class="line-number" value="990"></td><td class="line-content">      p = p.parent;</td></tr><tr><td class="line-number" value="991"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="992"></td><td class="line-content">    return root;</td></tr><tr><td class="line-number" value="993"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="994"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="995"></td><td class="line-content">  function findOldParent(d) {</td></tr><tr><td class="line-number" value="996"></td><td class="line-content">    var p = findParent(d);</td></tr><tr><td class="line-number" value="997"></td><td class="line-content">    return oldNodesByKey ? oldNodesByKey[p.key] : p;</td></tr><tr><td class="line-number" value="998"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="999"></td><td class="line-content">});</td></tr><tr><td class="line-number" value="1000"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="1001"></td><td class="line-content">function ascendingDepth(b, a) {</td></tr><tr><td class="line-number" value="1002"></td><td class="line-content">  return a.target.depth - b.target.depth;</td></tr><tr><td class="line-number" value="1003"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="1004"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="1005"></td><td class="line-content">function radius(depth) {</td></tr><tr><td class="line-number" value="1006"></td><td class="line-content">  return Math.pow(2, 5.8 - depth / 2);</td></tr><tr><td class="line-number" value="1007"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="1008"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="1009"></td><td class="line-content">function diagonal(d) {</td></tr><tr><td class="line-number" value="1010"></td><td class="line-content">  var x0 = d.source.x, y0 = y(d.source.depth),</td></tr><tr><td class="line-number" value="1011"></td><td class="line-content">      x1 = d.target.x, y1 = y(d.target.depth);</td></tr><tr><td class="line-number" value="1012"></td><td class="line-content">  if (x0 &lt; x1) x0 += w(d.target.probability) / 2;</td></tr><tr><td class="line-number" value="1013"></td><td class="line-content">  else if (x0 &gt; x1) x0 -= w(d.target.probability) / 2;</td></tr><tr><td class="line-number" value="1014"></td><td class="line-content">  return "M" + x0 + "," + y0</td></tr><tr><td class="line-number" value="1015"></td><td class="line-content">      + "C" + x0 + "," + (y0 + y1) / 2</td></tr><tr><td class="line-number" value="1016"></td><td class="line-content">      + "," + x1 + "," + (y0 + y1) / 2</td></tr><tr><td class="line-number" value="1017"></td><td class="line-content">      + "," + x1 + "," + y1;</td></tr><tr><td class="line-number" value="1018"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="1019"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="1020"></td><td class="line-content">})();</td></tr><tr><td class="line-number" value="1021"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="1022"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="1023"></td><td class="line-content"><span class="html-comment">&lt;!--&lt;![endif]--&gt;</span></td></tr><tr><td class="line-number" value="1024"></td><td class="line-content"><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>